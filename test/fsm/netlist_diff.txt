--- verilog_synth
+++ uhdm_synth
@@ -1,24 +1,24 @@
 /* Generated by Yosys 0.56+171 (git sha1 6fdcdd41d, g++ 11.4.0-1ubuntu1~22.04.2 -Og -fPIC) */
 (* dynports =  1  *)
-(* top =  1  *)
 (* src = "dut.sv:1.2-51.10" *)
+(* top =  1  *)
 module fsm(clock, reset, req_0, req_1, gnt_0, gnt_1);
-(* src = "dut.sv:2.13-2.18" *)
+(* src = "dut.sv:1.15-1.20" *)
 input clock;
 wire clock;
-(* src = "dut.sv:2.19-2.24" *)
+(* src = "dut.sv:1.22-1.27" *)
 input reset;
 wire reset;
-(* src = "dut.sv:2.25-2.30" *)
+(* src = "dut.sv:1.29-1.34" *)
 input req_0;
 wire req_0;
-(* src = "dut.sv:2.31-2.36" *)
+(* src = "dut.sv:1.36-1.41" *)
 input req_1;
 wire req_1;
-(* src = "dut.sv:3.13-3.18" *)
+(* src = "dut.sv:1.43-1.48" *)
 output gnt_0;
 wire gnt_0;
-(* src = "dut.sv:3.19-3.24" *)
+(* src = "dut.sv:1.50-1.55" *)
 output gnt_1;
 wire gnt_1;
 wire _00_;
@@ -56,257 +56,252 @@
 wire _32_;
 wire _33_;
 wire _34_;
-wire _35_;
-wire _36_;
 (* force_downto = 32'd1 *)
-(* src = "dut.sv:43.26-43.26|dut.sv:24.13-49.20|/home/alain/uhdm2rtlil/out/current/bin/../share/yosys/techmap.v:576.21-576.22" *)
-wire [2:0] _37_;
+(* src = "dut.sv:44.15-47.26|dut.sv:24.13-49.20|/home/alain/uhdm2rtlil/out/current/bin/../share/yosys/techmap.v:576.21-576.22" *)
+wire [2:0] _35_;
 (* force_downto = 32'd1 *)
-(* src = "dut.sv:43.26-43.26|dut.sv:24.13-49.20|/home/alain/uhdm2rtlil/out/current/bin/../share/yosys/techmap.v:576.21-576.22" *)
-wire [0:0] _38_;
+(* src = "dut.sv:44.15-47.26|dut.sv:24.13-49.20|/home/alain/uhdm2rtlil/out/current/bin/../share/yosys/techmap.v:576.21-576.22" *)
+wire [0:0] _36_;
+(* \reg  = 32'd1 *)
 (* src = "dut.sv:13.20-13.25" *)
 wire [2:0] state;
-\$_NOT_  _39_ (
+\$_NOT_  _37_ (
 .A(req_0),
 .Y(_04_)
 );
-\$_ORNOT_  _40_ (
+\$_ORNOT_  _38_ (
 .A(state[0]),
 .B(state[1]),
 .Y(_05_)
 );
-\$_OR_  _41_ (
+\$_OR_  _39_ (
 .A(_05_),
 .B(state[2]),
 .Y(_03_)
 );
-\$_NOT_  _42_ (
+\$_NOT_  _40_ (
 .A(state[2]),
 .Y(_06_)
 );
-\$_ORNOT_  _43_ (
+\$_ORNOT_  _41_ (
 .A(state[1]),
 .B(state[0]),
 .Y(_07_)
 );
-\$_ANDNOT_  _44_ (
+\$_ANDNOT_  _42_ (
 .A(_06_),
 .B(_07_),
 .Y(_08_)
 );
-\$_MUX_  _45_ (
+\$_MUX_  _43_ (
 .A(_03_),
 .B(_04_),
 .S(_08_),
 .Y(_09_)
 );
-\$_OR_  _46_ (
+\$_OR_  _44_ (
 .A(_03_),
 .B(_04_),
 .Y(_10_)
 );
-\$_ANDNOT_  _47_ (
+\$_ANDNOT_  _45_ (
 .A(_10_),
 .B(_09_),
-.Y(_00_)
+.Y(_01_)
 );
-\$_OR_  _48_ (
+\$_OR_  _46_ (
 .A(_07_),
 .B(state[2]),
 .Y(_11_)
 );
-\$_OR_  _49_ (
+\$_OR_  _47_ (
 .A(_07_),
 .B(_06_),
 .Y(_12_)
 );
-\$_MUX_  _50_ (
+\$_MUX_  _48_ (
 .A(_12_),
 .B(_11_),
 .S(req_0),
 .Y(_13_)
 );
-\$_NOT_  _51_ (
+\$_NOT_  _49_ (
 .A(req_1),
 .Y(_14_)
 );
-\$_OR_  _52_ (
-.A(state[0]),
-.B(state[1]),
+\$_ORNOT_  _50_ (
+.A(state[1]),
+.B(state[2]),
 .Y(_15_)
 );
-\$_OR_  _53_ (
+\$_MUX_  _51_ (
 .A(_15_),
-.B(_06_),
+.B(_14_),
+.S(_08_),
 .Y(_16_)
 );
-\$_ANDNOT_  _54_ (
-.A(_14_),
+\$_ANDNOT_  _52_ (
+.A(_13_),
 .B(_16_),
 .Y(_17_)
 );
-\$_ANDNOT_  _55_ (
-.A(_14_),
-.B(_11_),
+\$_OR_  _53_ (
+.A(state[0]),
+.B(state[1]),
 .Y(_18_)
 );
-\$_OR_  _56_ (
+\$_OR_  _54_ (
 .A(_18_),
-.B(_17_),
+.B(_06_),
 .Y(_19_)
 );
-\$_ANDNOT_  _57_ (
-.A(_13_),
+\$_ANDNOT_  _55_ (
+.A(_14_),
 .B(_19_),
 .Y(_20_)
 );
-\$_ORNOT_  _58_ (
-.A(state[1]),
-.B(state[2]),
+\$_ANDNOT_  _56_ (
+.A(_17_),
+.B(_20_),
+.Y(_02_)
+);
+\$_OR_  _57_ (
+.A(_12_),
+.B(req_0),
 .Y(_21_)
 );
-\$_ANDNOT_  _59_ (
+\$_ANDNOT_  _58_ (
 .A(_21_),
+.B(_20_),
+.Y(_00_)
+);
+\$_ANDNOT_  _59_ (
+.A(_03_),
 .B(_08_),
 .Y(_22_)
 );
-\$_ANDNOT_  _60_ (
-.A(_20_),
+\$_NAND_  _60_ (
+.A(_15_),
 .B(_22_),
-.Y(_01_)
-);
-\$_OR_  _61_ (
-.A(_12_),
-.B(req_0),
 .Y(_23_)
 );
-\$_ANDNOT_  _62_ (
-.A(_23_),
-.B(_17_),
-.Y(_02_)
-);
-\$_ANDNOT_  _63_ (
-.A(_03_),
-.B(_08_),
+\$_ANDNOT_  _61_ (
+.A(_04_),
+.B(_03_),
 .Y(_24_)
 );
-\$_NAND_  _64_ (
-.A(_21_),
-.B(_24_),
+\$_OR_  _62_ (
+.A(req_1),
+.B(req_0),
 .Y(_25_)
 );
-\$_ANDNOT_  _65_ (
-.A(_04_),
-.B(_03_),
+\$_ANDNOT_  _63_ (
+.A(_08_),
+.B(_25_),
 .Y(_26_)
 );
-\$_OR_  _66_ (
-.A(req_1),
-.B(req_0),
+\$_OR_  _64_ (
+.A(_26_),
+.B(_24_),
 .Y(_27_)
 );
-\$_ANDNOT_  _67_ (
-.A(_08_),
+\$_ANDNOT_  _65_ (
+.A(_19_),
 .B(_27_),
 .Y(_28_)
 );
-\$_OR_  _68_ (
+\$_NAND_  _66_ (
 .A(_28_),
-.B(_26_),
-.Y(_29_)
+.B(_23_),
+.Y(_35_[0])
 );
-\$_ANDNOT_  _69_ (
-.A(_16_),
-.B(_29_),
-.Y(_30_)
-);
-\$_NAND_  _70_ (
-.A(_30_),
-.B(_25_),
-.Y(_37_[0])
-);
-\$_NOR_  _71_ (
+\$_NOR_  _67_ (
 .A(req_1),
 .B(req_0),
-.Y(_31_)
+.Y(_29_)
 );
-\$_ANDNOT_  _72_ (
+\$_ANDNOT_  _68_ (
 .A(_08_),
-.B(_31_),
-.Y(_32_)
+.B(_29_),
+.Y(_30_)
 );
-\$_ANDNOT_  _73_ (
+\$_ANDNOT_  _69_ (
 .A(_10_),
-.B(_32_),
-.Y(_33_)
+.B(_30_),
+.Y(_31_)
 );
-\$_ANDNOT_  _74_ (
-.A(_25_),
-.B(_33_),
-.Y(_37_[1])
+\$_ANDNOT_  _70_ (
+.A(_23_),
+.B(_31_),
+.Y(_35_[1])
 );
-\$_ANDNOT_  _75_ (
+\$_ANDNOT_  _71_ (
 .A(state[2]),
 .B(state[1]),
-.Y(_37_[2])
+.Y(_35_[2])
 );
-\$_ANDNOT_  _76_ (
+\$_ANDNOT_  _72_ (
 .A(req_1),
 .B(_12_),
-.Y(_34_)
+.Y(_32_)
 );
-\$_ANDNOT_  _77_ (
+\$_ANDNOT_  _73_ (
 .A(req_0),
-.B(_16_),
-.Y(_35_)
+.B(_19_),
+.Y(_33_)
 );
-\$_OR_  _78_ (
-.A(_35_),
-.B(_34_),
-.Y(_36_)
+\$_OR_  _74_ (
+.A(_33_),
+.B(_32_),
+.Y(_34_)
 );
-\$_OR_  _79_ (
-.A(_36_),
-.B(_21_),
-.Y(_38_)
+\$_OR_  _75_ (
+.A(_34_),
+.B(_15_),
+.Y(_36_)
 );
+(* \always_ff  = 32'd1 *)
 (* src = "dut.sv:16.5-50.12" *)
-\$_SDFFE_PP0P_  gnt_0_reg /* _80_ */ (
+\$_SDFFE_PP0P_  gnt_0_reg /* _76_ */ (
 .C(clock),
 .D(_03_),
-.E(_00_),
+.E(_01_),
 .Q(gnt_0),
 .R(reset)
 );
+(* \always_ff  = 32'd1 *)
 (* src = "dut.sv:16.5-50.12" *)
-\$_SDFFE_PP0P_  gnt_1_reg /* _81_ */ (
+\$_SDFFE_PP0P_  gnt_1_reg /* _77_ */ (
 .C(clock),
-.D(_38_),
-.E(_01_),
+.D(_36_),
+.E(_02_),
 .Q(gnt_1),
 .R(reset)
 );
+(* \always_ff  = 32'd1 *)
 (* src = "dut.sv:16.5-50.12" *)
-\$_SDFFE_PP1P_  \state_reg[0]  /* _82_ */ (
+\$_SDFFE_PP1P_  \state_reg[0]  /* _78_ */ (
 .C(clock),
-.D(_37_[0]),
-.E(_02_),
+.D(_35_[0]),
+.E(_00_),
 .Q(state[0]),
 .R(reset)
 );
+(* \always_ff  = 32'd1 *)
 (* src = "dut.sv:16.5-50.12" *)
-\$_SDFFE_PP0P_  \state_reg[1]  /* _83_ */ (
+\$_SDFFE_PP0P_  \state_reg[1]  /* _79_ */ (
 .C(clock),
-.D(_37_[1]),
-.E(_02_),
+.D(_35_[1]),
+.E(_00_),
 .Q(state[1]),
 .R(reset)
 );
+(* \always_ff  = 32'd1 *)
 (* src = "dut.sv:16.5-50.12" *)
-\$_SDFFE_PP0P_  \state_reg[2]  /* _84_ */ (
+\$_SDFFE_PP0P_  \state_reg[2]  /* _80_ */ (
 .C(clock),
-.D(_37_[2]),
-.E(_02_),
+.D(_35_[2]),
+.E(_00_),
 .Q(state[2]),
 .R(reset)
 );
