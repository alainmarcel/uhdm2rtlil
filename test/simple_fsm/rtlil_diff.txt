--- simple_fsm_from_uhdm.il	2025-07-20 22:05:13.553553652 -0700
+++ simple_fsm_from_verilog.il	2025-07-20 22:05:13.569553841 -0700
@@ -1,23 +1,29 @@
 # Generated by Yosys 0.55+46 (git sha1 aa1daa702, g++ 11.4.0-1ubuntu1~22.04 -fPIC -O3)
-autoidx 1
+autoidx 4
 attribute \top 1
 attribute \src "dut.sv:2.1-65.10"
 module \simple_fsm
-  parameter \IDLE 4'--00
-  parameter \WORK 4'--01
-  parameter \WAIT 4'--10
-  parameter \DONE 4'--11
+  attribute \src "dut.sv:0.0-0.0"
+  wire $0\busy[0:0]
+  attribute \src "dut.sv:0.0-0.0"
+  wire width 2 $0\next_state[1:0]
   attribute \src "dut.sv:20.1-25.4"
   wire width 2 $0\state[1:0]
-  attribute \src "dut.sv:20.11-20.42"
-  wire $logic_not$dut.sv:20.11-20.42$2_Y
+  attribute \src "dut.sv:0.0-0.0"
+  wire $1\busy[0:0]
+  attribute \src "dut.sv:0.0-0.0"
+  wire width 2 $1\next_state[1:0]
+  attribute \src "dut.sv:0.0-0.0"
+  wire width 2 $2\next_state[1:0]
+  attribute \src "dut.sv:0.0-0.0"
+  wire width 2 $3\next_state[1:0]
   attribute \src "dut.sv:7.17-7.21"
   wire output 5 \busy
   attribute \src "dut.sv:3.17-3.20"
   wire input 1 \clk
   attribute \src "dut.sv:6.17-6.21"
   wire input 4 \done
-  attribute \reg 1
+  attribute \src "dut.sv:17.11-17.21"
   wire width 2 \next_state
   attribute \src "dut.sv:4.17-4.22"
   wire input 2 \reset
@@ -25,38 +31,106 @@
   wire input 3 \start
   attribute \src "dut.sv:8.23-8.28"
   wire width 2 output 6 \state
-  attribute \src "dut.sv:20.11-20.42"
-  cell $logic_not $logic_not$dut.sv:20.11-20.42$2
-    parameter \A_SIGNED 0
-    parameter \A_WIDTH 1
-    parameter \Y_WIDTH 1
-    connect \A \reset
-    connect \Y $logic_not$dut.sv:20.11-20.42$2_Y
+  attribute \always_comb 1
+  attribute \src "dut.sv:0.0-0.0"
+  process $proc$dut.sv:0$2
+    assign { } { }
+    assign $0\next_state[1:0] $1\next_state[1:0]
+    attribute \src "dut.sv:29.5-51.12"
+    switch \state
+      attribute \src "dut.sv:0.0-0.0"
+      case 2'00
+        assign { } { }
+        assign $1\next_state[1:0] $2\next_state[1:0]
+        attribute \src "dut.sv:31.13-34.35"
+        switch \start
+          attribute \src "dut.sv:31.17-31.22"
+          case 1'1
+            assign { } { }
+            assign $2\next_state[1:0] 2'01
+          attribute \src "dut.sv:33.13-33.17"
+          case 
+            assign { } { }
+            assign $2\next_state[1:0] 2'00
+        end
+      attribute \src "dut.sv:0.0-0.0"
+      case 2'01
+        assign { } { }
+        assign $1\next_state[1:0] 2'10
+      attribute \src "dut.sv:0.0-0.0"
+      case 2'10
+        assign { } { }
+        assign $1\next_state[1:0] $3\next_state[1:0]
+        attribute \src "dut.sv:40.13-43.35"
+        switch \done
+          attribute \src "dut.sv:40.17-40.21"
+          case 1'1
+            assign { } { }
+            assign $3\next_state[1:0] 2'11
+          attribute \src "dut.sv:42.13-42.17"
+          case 
+            assign { } { }
+            assign $3\next_state[1:0] 2'10
+        end
+      attribute \src "dut.sv:0.0-0.0"
+      case 2'11
+        assign { } { }
+        assign $1\next_state[1:0] 2'00
+      attribute \src "dut.sv:0.0-0.0"
+      case 
+        assign { } { }
+        assign $1\next_state[1:0] 2'00
+    end
+    sync always
+      update \next_state $0\next_state[1:0]
+  end
+  attribute \always_comb 1
+  attribute \src "dut.sv:0.0-0.0"
+  process $proc$dut.sv:0$3
+    assign { } { }
+    assign $0\busy[0:0] $1\busy[0:0]
+    attribute \src "dut.sv:56.5-62.12"
+    switch \state
+      attribute \src "dut.sv:0.0-0.0"
+      case 2'00
+        assign { } { }
+        assign $1\busy[0:0] 1'0
+      attribute \src "dut.sv:0.0-0.0"
+      case 2'01
+        assign { } { }
+        assign $1\busy[0:0] 1'1
+      attribute \src "dut.sv:0.0-0.0"
+      case 2'10
+        assign { } { }
+        assign $1\busy[0:0] 1'1
+      attribute \src "dut.sv:0.0-0.0"
+      case 2'11
+        assign { } { }
+        assign $1\busy[0:0] 1'0
+      attribute \src "dut.sv:0.0-0.0"
+      case 
+        assign { } { }
+        assign $1\busy[0:0] 1'0
+    end
+    sync always
+      update \busy $0\busy[0:0]
   end
   attribute \always_ff 1
   attribute \src "dut.sv:20.1-25.4"
   process $proc$dut.sv:20$1
     assign $0\state[1:0] \state
-    attribute \src "dut.sv:20.11-20.42"
-    switch $logic_not$dut.sv:20.11-20.42$2_Y
-      attribute \src "dut.sv:20.11-20.42"
+    attribute \src "dut.sv:21.5-24.29"
+    switch \reset
+      attribute \src "dut.sv:21.9-21.14"
       case 1'1
         assign $0\state[1:0] 2'00
-      attribute \src "dut.sv:20.11-20.42"
+      attribute \src "dut.sv:23.5-23.9"
       case 
-        assign $0\state[1:0] { 1'0 \done }
+        assign $0\state[1:0] \next_state
     end
     sync posedge \clk
       update \state $0\state[1:0]
-    sync negedge \reset
+    sync posedge \reset
       update \state $0\state[1:0]
   end
-  attribute \always_comb 1
-  attribute \src "dut.sv:28.1-52.4"
-  process $proc$dut.sv:28$1
-  end
-  attribute \always_comb 1
-  attribute \src "dut.sv:55.1-63.4"
-  process $proc$dut.sv:55$1
-  end
 end
